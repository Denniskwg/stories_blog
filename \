import {React, useState, useEffect} from 'react';
import Navbar from 'react-bootstrap/Navbar';
import Button from 'react-bootstrap/Button';
import Nav from 'react-bootstrap/Nav';
import { useDispatch } from 'react-redux';
import './components.css';
import axios from 'axios';


function Header() {
  return (
    <div className="header">
      <NavBar/>
      <About/>
      <Optionsbox/>
    </div>
  );
}

function About() {
  return (
    <div className="about">
      <div className="about-text">
        <div className="text-1">Discover stories about your favourite topics</div>
      </div>
    </div>
  );
}

function Optionsbox() {
  const dispatch = useDispatch();


  const updateSharedState = (e) => {
    dispatch({ type: 'SET_SHARED_VALUE', payload: e.target.dataset.name });
  }
  return ( 
    <div className="options">
      <div className="option" data-name="Technology" onClick={updateSharedState}>Technology</div>
      <div className="option" data-name="HomeDecor" onClick={updateSharedState}>Home Decor</div>
      <div className="option" data-name="Programming" onClick={updateSharedState}>Programming</div>
      <div className="option" data-name="Lifestyle" onClick={updateSharedState}>Lifestyle</div>
      <div className="option" data-name="Fashion" onClick={updateSharedState}>Fashion</div>
      <div className="option" data-name="Architecture" onClick={updateSharedState}>Architecture</div>
      <div className="option" data-name="Business" onClick={updateSharedState}>Business</div>
      <div className="option" data-name="Climatechange" onClick={updateSharedState}>Climate change</div>
    </div>
  );
}

function NavBar(props) {
  const initiateAuthorizationRequest = () => {
    axios.get('http://127.0.0.1:8000/')
      .then(async response => {
        console.log(response.request.responseURL);
	//window.location.href = response.request.responseURL;
        const res = await axios.post(response.request.responseURL, {password: "deskan", email: "dkanja"});
	console.log(res);
      })
  }
  return (
    <div className="navigation navbar-expand-lg navbar-light bg-light .navbar-expand{-sm|-md|-lg|-xl}" bg="light">
      <div className="site-name">World Stories</div>
      <Navbar.Toggle aria-controls="basic-navbar-nav" />
      <Navbar.Collapse id="basic-navbar-nav">
        <Nav className="ml-auto header-navigation">
	  <Button onClick={initiateAuthorizationRequest}>create new</Button>
          <Nav.Link className="nav-element" href="/">Home</Nav.Link>
	  <Nav.Link className="nav-element" href="/login">Login</Nav.Link>
	  <Nav.Link className="nav-element" href="/signup">Signup</Nav.Link>
	</Nav>
      </Navbar.Collapse>
    </div>
  );
}

export const header = Header;
export const navBar = NavBar;
