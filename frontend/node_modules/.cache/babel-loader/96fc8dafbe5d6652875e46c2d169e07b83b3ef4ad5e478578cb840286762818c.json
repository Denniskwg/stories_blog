{"ast":null,"code":"var _jsxFileName = \"/home/dkamau476/world_stories/src/authentication/auth-provider.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useCallback, useContext, useMemo, useReducer } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AuthContext from \"./auth-context\";\nimport { reducer } from \"./reducer\";\nimport { initialAuthState } from \"./auth-state\";\nimport axios from \"axios\";\nimport { TOKEN_LOCALSTORAGE_KEY, EXPIRES_AT } from \"./auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet refreshPromise = null;\nexport const AuthProvider = opts => {\n  _s();\n  const {\n    children\n  } = opts;\n  const HOST_URL = process.env.REACT_APP_API_HOST_URL || \"http://localhost:8000/\";\n  const CLIENT_ID = process.env.REACT_APP_CLIENT_ID || \"xwYKg1b4eazi2OPlObUOzBvZaqoQ7z866Bcd2dVx\";\n  const CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET || \"fa8K70L2nPaiUFQo47xp9xJRwVbq8Pg1yqZXXCRHo5I3wLG0B95NBLIwzXzPtkkIOvDyz9hpF3Ip8ZA6YeDigOMMmzuS5VArLyGN6SOfBXaPmcaqPA0mrKh1d4lO7hIR\";\n  const [state, dispatch] = useReducer(reducer, initialAuthState);\n  const navigate = useNavigate();\n  const refreshToken = useCallback((username, password) => {\n    const local = localStorage.getItem(TOKEN_LOCALSTORAGE_KEY);\n    console.log('refreshing');\n    return new Promise((resolve, reject) => {\n      if (local === null) {\n        reject(\"already refreshing or localstorage token not found\");\n        return;\n      }\n      const token = JSON.parse(local);\n      const url = HOST_URL + \"o/token/\";\n      const request = axios.post(url, new URLSearchParams({\n        username: username,\n        password: password,\n        refresh_token: token.refresh_token,\n        grant_type: \"password\",\n        client_id: CLIENT_ID,\n        client_secret: CLIENT_SECRET\n      }), {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      });\n      request.then(res => {\n        const token = JSON.stringify(res.data);\n        let expires_at = new Date();\n        expires_at.setHours(expires_at.getHours() + 1);\n        localStorage.setItem(TOKEN_LOCALSTORAGE_KEY, token);\n        expires_at = '' + expires_at.getTime();\n        localStorage.setItem(EXPIRES_AT, expires_at);\n        navigate(-1);\n        resolve(res);\n      }).catch(err => {\n        navigate(\"/login\", {\n          replace: true\n        });\n        reject(err);\n      });\n    });\n  }, [CLIENT_ID, CLIENT_SECRET, HOST_URL, navigate]);\n  const getClient = useCallback(() => {\n    const newInstance = axios.create();\n    newInstance.interceptors.request.use(config => {\n      var _config$url;\n      const local = localStorage.getItem(TOKEN_LOCALSTORAGE_KEY);\n      if (!((_config$url = config.url) !== null && _config$url !== void 0 && _config$url.includes(HOST_URL))) config.url = HOST_URL + config.url;\n      dispatch({\n        type: \"LOADING\",\n        value: true\n      });\n      if (local === null) return config;\n      const token = JSON.parse(local).access_token;\n      if (token && config.headers !== undefined) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n    newInstance.interceptors.response.use(response => {\n      dispatch({\n        type: \"LOADING\",\n        value: false\n      });\n      return response;\n    }, async error => {\n      dispatch({\n        type: \"LOADING\",\n        value: false\n      });\n      const originalRequest = error.config;\n      if (error.response === undefined) return Promise.reject(error);\n      if (error.response.status === 401 && !originalRequest._retry) {\n        originalRequest._retry = true;\n        if (refreshPromise === null) {\n          const prom = refreshToken().then(res => {\n            refreshPromise = null;\n            return res;\n          });\n          refreshPromise = prom;\n          await prom;\n        } else {\n          await refreshPromise;\n        }\n        return newInstance(originalRequest);\n      }\n      return Promise.reject(error);\n    });\n    return newInstance;\n  }, [HOST_URL, refreshToken]);\n  const login = useCallback(async (username, password) => {\n    const loginUrl = HOST_URL + \"login\";\n    const loginResponse = await axios.post(loginUrl, {\n      email: username,\n      password: password\n    });\n    if (loginResponse.data.message === \"Login successful\") {\n      const url = HOST_URL + \"o/token/\";\n      const request = axios.post(url, new URLSearchParams({\n        username: username,\n        password: password,\n        grant_type: \"password\",\n        client_id: CLIENT_ID,\n        client_secret: CLIENT_SECRET\n      }), {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      });\n      return new Promise((resolve, reject) => {\n        request.then(res => {\n          const token = JSON.stringify(res.data);\n          let expires_at = new Date();\n          expires_at.setHours(expires_at.getHours() + 1);\n          localStorage.setItem(TOKEN_LOCALSTORAGE_KEY, token);\n          expires_at = '' + expires_at.getTime();\n          localStorage.setItem(EXPIRES_AT, expires_at);\n          navigate(\"/\", {\n            replace: true\n          });\n          resolve(res);\n        }).catch(err => {\n          reject(err);\n        });\n      });\n    } else {\n      alert(\"Invalid Login details!\");\n    }\n  }, [CLIENT_ID, CLIENT_SECRET, HOST_URL, navigate]);\n  const createUser = useCallback(async (username, password, firstName, lastName, email) => {\n    const url = HOST_URL + \"register\";\n    const request = axios.post(url, {\n      user_name: username,\n      password: password,\n      first_name: firstName,\n      last_name: lastName,\n      email: email\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    await request;\n    await login(email, password);\n  }, [HOST_URL, login]);\n  const contextValue = useMemo(() => {\n    return {\n      ...state,\n      refreshToken,\n      login,\n      createUser,\n      getClient\n    };\n  }, [state, refreshToken, login, createUser, getClient]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"tqt9RzY70LTS54uRAF9Ch1fG4/o=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useCallback","useContext","useMemo","useReducer","useNavigate","AuthContext","reducer","initialAuthState","axios","TOKEN_LOCALSTORAGE_KEY","EXPIRES_AT","jsxDEV","_jsxDEV","refreshPromise","AuthProvider","opts","_s","children","HOST_URL","process","env","REACT_APP_API_HOST_URL","CLIENT_ID","REACT_APP_CLIENT_ID","CLIENT_SECRET","REACT_APP_CLIENT_SECRET","state","dispatch","navigate","refreshToken","username","password","local","localStorage","getItem","console","log","Promise","resolve","reject","token","JSON","parse","url","request","post","URLSearchParams","refresh_token","grant_type","client_id","client_secret","headers","then","res","stringify","data","expires_at","Date","setHours","getHours","setItem","getTime","catch","err","replace","getClient","newInstance","create","interceptors","use","config","_config$url","includes","type","value","access_token","undefined","Authorization","response","error","originalRequest","status","_retry","prom","login","loginUrl","loginResponse","email","message","alert","createUser","firstName","lastName","user_name","first_name","last_name","contextValue","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["/home/dkamau476/world_stories/src/authentication/auth-provider.tsx"],"sourcesContent":["import React, { useCallback, useContext, useMemo, useReducer } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AuthContext, { AuthContextInterface } from \"./auth-context\";\nimport { reducer } from \"./reducer\";\nimport { initialAuthState, User } from \"./auth-state\";\nimport axios, { AxiosInstance, AxiosResponse } from \"axios\";\nimport {\n  TOKEN_LOCALSTORAGE_KEY,\n  EXPIRES_AT,\n} from \"./auth\";\n\n\ninterface AuthProviderOptions {\n  children?: React.ReactNode;\n}\n\nlet refreshPromise: Promise<AxiosResponse<any, any>> | null = null;\n\nexport const AuthProvider = (opts: AuthProviderOptions): JSX.Element => {\n  const { children } = opts;\n  const HOST_URL = process.env.REACT_APP_API_HOST_URL || \"http://localhost:8000/\";\n  const CLIENT_ID = process.env.REACT_APP_CLIENT_ID || \"xwYKg1b4eazi2OPlObUOzBvZaqoQ7z866Bcd2dVx\";\n  const CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET || \"fa8K70L2nPaiUFQo47xp9xJRwVbq8Pg1yqZXXCRHo5I3wLG0B95NBLIwzXzPtkkIOvDyz9hpF3Ip8ZA6YeDigOMMmzuS5VArLyGN6SOfBXaPmcaqPA0mrKh1d4lO7hIR\";\n\n  const [state, dispatch] = useReducer(reducer, initialAuthState);\n  const navigate = useNavigate();\n\n\n  const refreshToken = useCallback((username: string, password: string): Promise<AxiosResponse<any>> => {\n    const local = localStorage.getItem(TOKEN_LOCALSTORAGE_KEY);\n    console.log('refreshing');\n    return new Promise<AxiosResponse<any>>((resolve, reject) => {\n      if (local === null) {\n        reject(\"already refreshing or localstorage token not found\");\n        return;\n      }\n      const token = JSON.parse(local);\n      const url = HOST_URL + \"o/token/\";\n      const request = axios.post(\n        url,\n        new URLSearchParams({\n          username: username,\n          password: password,\n          refresh_token: token.refresh_token,\n          grant_type: \"password\",\n          client_id: CLIENT_ID,\n          client_secret: CLIENT_SECRET,\n        }),\n        {\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n          },\n        }\n      );\n      request\n        .then((res) => {\n          const token = JSON.stringify(res.data);\n          let expires_at = new Date();\n          expires_at.setHours(expires_at.getHours() + 1)\n          localStorage.setItem(TOKEN_LOCALSTORAGE_KEY, token);\n          expires_at = '' + expires_at.getTime();\n          localStorage.setItem(EXPIRES_AT, expires_at);\n          navigate(-1);\n          resolve(res);\n        })\n        .catch((err) => {\n          navigate(\"/login\", { replace: true });\n          reject(err);\n        });\n    });\n  }, [CLIENT_ID, CLIENT_SECRET, HOST_URL, navigate]);\n\n  const getClient = useCallback((): AxiosInstance => {\n    const newInstance = axios.create();\n    newInstance.interceptors.request.use((config) => {\n      const local = localStorage.getItem(TOKEN_LOCALSTORAGE_KEY);\n      if (!config.url?.includes(HOST_URL)) config.url = HOST_URL + config.url;\n      dispatch({ type: \"LOADING\", value: true });\n      if (local === null) return config;\n      const token = JSON.parse(local).access_token;\n      if (token && config.headers !== undefined) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n    newInstance.interceptors.response.use(\n      (response) => {\n        dispatch({ type: \"LOADING\", value: false });\n        return response;\n      },\n      async (error) => {\n        dispatch({ type: \"LOADING\", value: false });\n        const originalRequest = error.config;\n        if (error.response === undefined) return Promise.reject(error);\n        if (error.response.status === 401 && !originalRequest._retry) {\n          originalRequest._retry = true;\n          if (refreshPromise === null) {\n            const prom = refreshToken().then((res) => {\n              refreshPromise = null;\n              return res;\n            });\n            refreshPromise = prom;\n            await prom;\n          } else {\n            await refreshPromise;\n          }\n\n          return newInstance(originalRequest);\n        }\n        return Promise.reject(error);\n      }\n    );\n    return newInstance;\n  }, [HOST_URL, refreshToken]);\n\n  const login = useCallback(\n    async (username: string, password: string): Promise<AxiosResponse<any>> => {\n      const loginUrl = HOST_URL + \"login\";\n      const loginResponse = await axios.post(loginUrl, {email: username, password: password})\n      if (loginResponse.data.message === \"Login successful\") {\n        const url = HOST_URL + \"o/token/\";\n        const request = axios.post(\n          url,\n          new URLSearchParams({\n            username: username,\n            password: password,\n            grant_type: \"password\",\n            client_id: CLIENT_ID,\n            client_secret: CLIENT_SECRET,\n          }),\n          {\n            headers: {\n              \"Content-Type\": \"application/x-www-form-urlencoded\",\n            },\n          }\n        );\n        return new Promise<AxiosResponse<any>>((resolve, reject) => {\n          request\n            .then((res) => {\n              const token = JSON.stringify(res.data);\n              let expires_at = new Date();\n              expires_at.setHours(expires_at.getHours() + 1)\n              localStorage.setItem(TOKEN_LOCALSTORAGE_KEY, token);\n              expires_at = '' + expires_at.getTime()\n              localStorage.setItem(EXPIRES_AT, expires_at);\n              navigate(\"/\", { replace: true });\n              resolve(res);\n            })\n            .catch((err) => {\n              reject(err);\n            });\n        });\n      } else {\n        alert(\"Invalid Login details!\");\n      }\n    },\n    [CLIENT_ID, CLIENT_SECRET, HOST_URL, navigate]\n  );\n\n  const createUser = useCallback(\n    async (\n      username: string,\n      password: string,\n      firstName: string,\n      lastName: string,\n      email: string\n    ) => {\n      const url = HOST_URL + \"register\";\n      const request = axios.post(\n        url,\n        {\n          user_name: username,\n          password: password,\n          first_name: firstName,\n          last_name: lastName,\n          email: email\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      await request;\n      await login(email, password);\n    },\n    [HOST_URL, login]\n  );\n\n  const contextValue = useMemo(() => {\n    return {\n      ...state,\n      refreshToken,\n      login,\n      createUser,\n      getClient,\n    };\n  }, [state, refreshToken, login, createUser, getClient]);\n\n  return (\n    <AuthContext.Provider value={contextValue}>{children}</AuthContext.Provider>\n  );\n};\n\nexport const useAuth = <\n  TUser extends User = User\n>(): AuthContextInterface<TUser> =>\n  useContext(AuthContext) as AuthContextInterface<TUser>;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}